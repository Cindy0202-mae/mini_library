<%= form_with url: books_path, method: :get, local: true, class: "d-flex mb-4" do %>
  <%= text_field_tag :query, params[:query], placeholder: "Search by title, author, or genre...", class: "form-control me-2" %>
  <%= submit_tag "Search", class: "btn btn-primary" %>
<% end %>

<% if @books.present? %>
  <table class="table table-striped table-hover">
    <thead class="table-dark">
      <tr>
        <th>Title</th>
        <th>Author</th>
        <th>Genre</th>
        <th>Description</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @books.each do |book| %>
        <tr>
          <td><%= book.title %></td>
          <td><%= book.author %></td>
          <td><%= book.genre %></td>
          <td><%= truncate(book.description, length:100)%></td>
          <td>
            <%= link_to "Show", book_path(book), class: "btn btn-sm btn-info me-2" %>
            <%= link_to "Edit", edit_book_path(book), class: "btn btn-sm btn-warning me-2" %>
            <%= link_to "Delete", book_path(book), method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-sm btn-danger" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <div class="alert alert-warning">
    <strong>No books found!</strong>Try a different book.
    <%= link_to "Back to Library", books_path, class: "btn btn-secondary mt-2" %>
  </div>
<% end %>
